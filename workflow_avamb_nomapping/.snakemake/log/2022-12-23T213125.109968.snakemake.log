Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cluster nodes: 10
Job stats:
job                                            count    min threads    max threads
-------------------------------------------  -------  -------------  -------------
cat_checkm2_all                                    1              1              1
create_cluster_scores_bin_path_dictionaries        1              5              5
create_ripped_bins_avamb                           1              5              5
run_avamb                                          1             15             15
run_drep_manual_vamb_z_y                           1              5              5
samples_with_bins                                  1              1              1
target_rule                                        1              1              1
workflow_finished                                  1              1              1
total                                              8              1             15

Select jobs to execute...

[Fri Dec 23 21:31:31 2022]
rule run_avamb:
    input: /home/projects/cpr_10006/projects/aamb/datasets/urog/contigs.fna, /home/projects/cpr_10006/people/paupie/aae_new/bam_files_sorted/urog
    output: /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb, /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/aae_z_clusters.tsv, /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/aae_y_clusters.tsv, /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/vae_clusters.tsv, /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/contignames, /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/lengths.npz
    log: /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/tmp/avamb_finished.log
    jobid: 7
    reason: Missing output files: /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/vae_clusters.tsv, /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/aae_z_clusters.tsv, /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/aae_y_clusters.tsv, /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/tmp/avamb_finished.log, /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/lengths.npz, /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/contignames; Params have changed since last execution
    threads: 15
    resources: mem_mb=1951, disk_mb=1951, tmpdir=/tmp

Submitted job 7 with external jobid '38399613'.
[Fri Dec 23 21:32:11 2022]
Error in rule run_avamb:
    jobid: 7
    output: /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb, /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/aae_z_clusters.tsv, /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/aae_y_clusters.tsv, /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/vae_clusters.tsv, /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/contignames, /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/lengths.npz
    log: /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/tmp/avamb_finished.log (check log file(s) for error message)
    shell:
        rm -r /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb  && vamb --outdir /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb --fasta /home/projects/cpr_10006/projects/aamb/datasets/urog/contigs.fna --bamfiles /home/projects/cpr_10006/people/paupie/aae_new/bam_files_sorted/urog/*.bam --cuda -o C --minfasta 200000; touch /home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb/tmp/avamb_finished.log
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
    cluster_jobid: 38399613

Error executing rule run_avamb on cluster (jobid: 7, external: 38399613, jobscript: /home/projects/cpr_10006/projects/aamb/avamb/workflow_avamb_nomapping/.snakemake/tmp.ai0xrk29/snakejob.run_avamb.7.sh). For error details see the cluster log and the log files of the involved rule(s).
Removing output files of failed job run_avamb since they might be corrupted:
/home/projects/cpr_10006/projects/aamb/tests/test_workflow_no_mapping/avamb_outdir/avamb
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2022-12-23T213125.109968.snakemake.log
