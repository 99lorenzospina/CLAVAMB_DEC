Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 10
Rules claiming more threads will be scaled down.
Conda environments: ignored
Job stats:
job                  count    min threads    max threads
-----------------  -------  -------------  -------------
cat_checkm2_all          1              1              1
cat_contigs              1              1              1
dict                     1              1              1
index                    1              1              1
minimap                  2             10             10
run_avamb                1             10             10
samples_with_bins        1              1              1
sort                     2              2              2
target_rule              1              1              1
workflow_finished        1              1              1
total                   12              1             10

Select jobs to execute...

[Tue Jan 24 18:02:41 2023]
rule cat_contigs:
    input: /home/ppierali/input_test_avamb/contigs/contigs.S10.fasta, /home/ppierali/input_test_avamb/contigs/contigs.S11.fasta
    output: /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.fna.gz
    log: /home/ppierali/input_test_avamb/avamb_outdir/log/contigs/catcontigs.log
    jobid: 5
    reason: Software environment definition has changed since last execution
    resources: tmpdir=/tmp

[Tue Jan 24 18:02:51 2023]
Finished job 5.
1 of 12 steps (8%) done
Select jobs to execute...

[Tue Jan 24 18:02:51 2023]
rule index:
    input: /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.fna.gz
    output: /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.mmi
    log: /home/ppierali/input_test_avamb/avamb_outdir/log/contigs/index.log
    jobid: 8
    reason: Input files updated by another job: /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.fna.gz
    resources: tmpdir=/tmp


[Tue Jan 24 18:02:51 2023]
rule dict:
    input: /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.fna.gz
    output: /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.dict
    log: /home/ppierali/input_test_avamb/avamb_outdir/log/contigs/dict.log
    jobid: 9
    reason: Input files updated by another job: /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.fna.gz
    resources: tmpdir=/tmp

[Tue Jan 24 18:02:52 2023]
Finished job 9.
2 of 12 steps (17%) done
[Tue Jan 24 18:02:56 2023]
Finished job 8.
3 of 12 steps (25%) done
Select jobs to execute...

[Tue Jan 24 18:02:56 2023]
rule minimap:
    input: /home/ppierali/input_test_avamb/reads/sample_11.r1.fq.gz, /home/ppierali/input_test_avamb/reads/sample_11.r2.fq.gz, /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.mmi, /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.dict
    output: /home/ppierali/input_test_avamb/avamb_outdir/mapped/S11.bam
    log: /home/ppierali/input_test_avamb/avamb_outdir/log/map/S11.minimap.log
    jobid: 11
    reason: Input files updated by another job: /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.mmi, /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.dict
    wildcards: sample=S11
    threads: 10
    resources: tmpdir=/tmp

[Tue Jan 24 18:09:27 2023]
Finished job 11.
4 of 12 steps (33%) done
Select jobs to execute...

[Tue Jan 24 18:09:27 2023]
rule minimap:
    input: /home/ppierali/input_test_avamb/reads/sample_10.r1.fq.gz, /home/ppierali/input_test_avamb/reads/sample_10.r2.fq.gz, /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.mmi, /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.dict
    output: /home/ppierali/input_test_avamb/avamb_outdir/mapped/S10.bam
    log: /home/ppierali/input_test_avamb/avamb_outdir/log/map/S10.minimap.log
    jobid: 7
    reason: Missing output files: /home/ppierali/input_test_avamb/avamb_outdir/mapped/S10.bam; Input files updated by another job: /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.mmi, /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.dict
    wildcards: sample=S10
    threads: 10
    resources: tmpdir=/tmp

[Tue Jan 24 18:14:59 2023]
Error in rule minimap:
    jobid: 7
    input: /home/ppierali/input_test_avamb/reads/sample_10.r1.fq.gz, /home/ppierali/input_test_avamb/reads/sample_10.r2.fq.gz, /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.mmi, /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.dict
    output: /home/ppierali/input_test_avamb/avamb_outdir/mapped/S10.bam
    log: /home/ppierali/input_test_avamb/avamb_outdir/log/map/S10.minimap.log (check log file(s) for error details)
    conda-env: /home/ppierali/avamb/workflow_avamb/.snakemake/conda/7b419e9cee71a9bb5db02ddc7f9fb260_
    shell:
        minimap2 -t 10 -ax sr /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.mmi /home/ppierali/input_test_avamb/reads/sample_10.r1.fq.gz /home/ppierali/input_test_avamb/reads/sample_10.r2.fq.gz -N 5 | grep -v '^@' | cat /home/ppierali/input_test_avamb/avamb_outdir/contigs.flt.dict -  | samtools view -F 3584 -b -  > /home/ppierali/input_test_avamb/avamb_outdir/mapped/S10.bam 2> /home/ppierali/input_test_avamb/avamb_outdir/log/map/S10.minimap.log
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Removing output files of failed job minimap since they might be corrupted:
/home/ppierali/input_test_avamb/avamb_outdir/mapped/S10.bam
Select jobs to execute...

[Tue Jan 24 18:15:01 2023]
rule sort:
    input: /home/ppierali/input_test_avamb/avamb_outdir/mapped/S11.bam
    output: /home/ppierali/input_test_avamb/avamb_outdir/mapped/S11.sort.bam
    log: /home/ppierali/input_test_avamb/avamb_outdir/log/map/S11.sort.log
    jobid: 10
    reason: Missing output files: /home/ppierali/input_test_avamb/avamb_outdir/mapped/S11.sort.bam; Input files updated by another job: /home/ppierali/input_test_avamb/avamb_outdir/mapped/S11.bam
    wildcards: sample=S11
    threads: 2
    resources: tmpdir=/tmp

Terminating processes on user request, this might take some time.
[Tue Jan 24 18:17:31 2023]
Error in rule sort:
    jobid: 10
    input: /home/ppierali/input_test_avamb/avamb_outdir/mapped/S11.bam
    output: /home/ppierali/input_test_avamb/avamb_outdir/mapped/S11.sort.bam
    log: /home/ppierali/input_test_avamb/avamb_outdir/log/map/S11.sort.log (check log file(s) for error details)
    conda-env: /home/ppierali/avamb/workflow_avamb/.snakemake/conda/1c362e072ba4b1d62ef6b73960392a61_
    shell:
        samtools sort /home/ppierali/input_test_avamb/avamb_outdir/mapped/S11.bam -T /home/ppierali/input_test_avamb/avamb_outdir/mapped/tmp.S11 --threads 1 -m 3G -o /home/ppierali/input_test_avamb/avamb_outdir/mapped/S11.sort.bam 2>/home/ppierali/input_test_avamb/avamb_outdir/log/map/S11.sort.log
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Complete log: .snakemake/log/2023-01-24T180239.657528.snakemake.log
